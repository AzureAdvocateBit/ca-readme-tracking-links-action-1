name: Link Checker
on:
  push:
    branches:
      - master
jobs:
  generate:
    name: Advocate Trends Link Checker
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Update readme

        uses: ./
      - name: readme
        uses: actions/upload-artifact@v2
        with:
            name: readme
            path: /home/runner/work/_temp/_github_home/README.md

  upload:
    name: Upload Readme to PR
    runs-on: ubuntu-latest
    needs: generate
    steps:
      - name: Download results from the generate job
        uses: actions/download-artifact@v2
        with:
            name: readme
      - name: Commit updated readme
        run: |
          git config --global user.name "Shayne Boyer"
          git config --global user.email "spboyer@live.com"
          git commit -m 'links checked'
          git add README.md
          git push